"0",""
"0","articles_per_week_2023<-mh_cleaned%>%"
"0","  mutate(Date=as.Date(Date,format=""%Y-%m-%d""))%>%"
"0","  filter(Date<=as.Date(""2023-05-31"",format=""%Y-%m-%d""))%>%"
"0","  mutate(ref_id=ifelse(ref_id==1,Visitor_ID,ref_id))%>%"
"0","  mutate(time_period=ifelse(Date<=as.Date(""2023-05-31"",format=""%Y-%m-%d""),""2023 Jan 1st to May 31st"",""2024 Jan 1st to May 31st""))%>%"
"0","  ungroup()%>%"
"0","  mutate(ref_dates=floor_date(Date,""week""))%>%"
"0","  group_by(ref_id,time_period,ref_dates)%>%"
"0","  summarise(n_articles_read=sum(n_articles_visited))%>%"
"0","  ungroup()%>%"
"0","  spread(ref_dates,n_articles_read)%>%"
"0","  gather(""week"",""articles_read"",`2023-01-01`:`2023-05-28`)%>%"
"0","  arrange(ref_id)%>%"
"0","  mutate(articles_read=ifelse(is.na(articles_read),0,articles_read))%>%"
"0","  group_by(ref_id,time_period)%>%"
"0","  summarise(n_weeks=n_distinct(week),"
"0","            total_articles_read=sum(articles_read))%>%"
"0","  mutate(articles_per_week=total_articles_read/n_weeks)"
"1","[38;5;232m`summarise()` has grouped output by 'ref_id', 'time_period'. You can override using the `.groups` argument.[39m
"
"1","[38;5;232m`summarise()` has grouped output by 'ref_id'. You can override using the `.groups` argument.[39m
"
"0","articles_per_week_2024<-mh_cleaned%>%"
"0","  mutate(Date=as.Date(Date,format=""%Y-%m-%d""))%>%"
"0","  filter(Date>=as.Date(""2024-01-01"",format=""%Y-%m-%d""))%>%"
"0","  mutate(ref_id=ifelse(ref_id==1,Visitor_ID,ref_id))%>%"
"0","  mutate(time_period=ifelse(Date<=as.Date(""2023-05-31"",format=""%Y-%m-%d""),""2023 Jan 1st to May 31st"",""2024 Jan 1st to May 31st""))%>%"
"0","  ungroup()%>%"
"0","  mutate(ref_dates=floor_date(Date,""week""))%>%"
"0","  group_by(ref_id,time_period,ref_dates)%>%"
"0","  summarise(n_articles_read=sum(n_articles_visited))%>%"
"0","  ungroup()%>%"
"0","  spread(ref_dates,n_articles_read)%>%"
"0","  gather(""week"",""articles_read"",`2023-12-31`:`2024-05-26`)%>%"
"0","  arrange(ref_id)%>%"
"0","  mutate(articles_read=ifelse(is.na(articles_read),0,articles_read))%>%"
"0","  group_by(ref_id,time_period)%>%"
"0","  summarise(n_weeks=n_distinct(week),"
"0","            total_articles_read=sum(articles_read))%>%"
"0","  mutate(articles_per_week=total_articles_read/n_weeks)"
"1","[38;5;232m`summarise()` has grouped output by 'ref_id', 'time_period'. You can override using the `.groups` argument.[39m
"
"1","[38;5;232m`summarise()` has grouped output by 'ref_id'. You can override using the `.groups` argument.[39m
"
"0","articles_per_week<-rbind(articles_per_week_2023,articles_per_week_2024)"
